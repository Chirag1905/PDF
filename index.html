<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; media-src 'self'; frame-src 'none'; object-src 'none';">
    <title>Secure PDF Viewer</title>
    <style>
      html, body {
        overflow: hidden;
        touch-action: none;
      }
    </style>
  </head>
  <body oncontextmenu="return false;" style="margin: 0; padding: 0; overflow: hidden;">
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <script>
      // Comprehensive security measures
      (function() {
        // Disable all keyboard shortcuts that could expose content
        const blockedKeys = [
          "F12", "Insert", "PrintScreen", 
          "c", "C", "x", "X", "v", "V", "a", "A", 
          "p", "P", "s", "S", "u", "U"
        ];
        
        const blockedCombinations = [
          { ctrlKey: true, shiftKey: true, key: "I" },
          { ctrlKey: true, shiftKey: true, key: "J" },
          { ctrlKey: true, shiftKey: true, key: "C" },
          { ctrlKey: true, key: "U" },
          { ctrlKey: true, key: "S" },
          { ctrlKey: true, key: "P" },
          { ctrlKey: true, key: "A" },
          { metaKey: true, key: "C" }, // Mac Cmd+C
          { metaKey: true, key: "A" }, // Mac Cmd+A
        ];
        
        function isCombinationBlocked(event) {
          return blockedCombinations.some(combo => {
            return (
              (combo.ctrlKey === undefined || combo.ctrlKey === event.ctrlKey) &&
              (combo.shiftKey === undefined || combo.shiftKey === event.shiftKey) &&
              (combo.metaKey === undefined || combo.metaKey === event.metaKey) &&
              combo.key === event.key
            );
          });
        }
        
        document.addEventListener('keydown', function(event) {
          // Block single keys
          if (blockedKeys.includes(event.key)) {
            event.preventDefault();
            alert('This action is restricted for security reasons');
            return false;
          }
          
          // Block key combinations
          if (isCombinationBlocked(event)) {
            event.preventDefault();
            alert('This action is restricted for security reasons');
            return false;
          }
        });
        
        // Prevent context menu
        document.addEventListener('contextmenu', function(event) {
          event.preventDefault();
          return false;
        });
        
        // Prevent text selection
        document.addEventListener('selectstart', function(event) {
          event.preventDefault();
          return false;
        });
        
        // Prevent drag and drop
        document.addEventListener('dragstart', function(event) {
          event.preventDefault();
          return false;
        });
        
        // Clear clipboard periodically
        setInterval(function() {
          navigator.clipboard.writeText('').catch(function() {});
        }, 2000);
        
        // // Detect if devtools is open (works in some browsers)
        // let devtoolsOpen = false;
        // const devtoolsCheck = new Date();
        // devtoolsCheck.toString = function() {
        //   devtoolsOpen = true;
        //   return '';
        // };
        
        // setInterval(function() {
        //   devtoolsOpen = false;
        //   console.log(devtoolsCheck);
        //   if (devtoolsOpen) {
        //     alert('Developer tools are not allowed');
        //     window.location.reload();
        //   }
        // }, 1000);
        
        // Prevent screenshots on Windows (Windows + Shift + S)
        document.addEventListener('keydown', function(event) {
          if (event.key === 's' && event.shiftKey && (event.metaKey || event.ctrlKey)) {
            event.preventDefault();
            alert('Screenshots are disabled for security reasons');
            return false;
          }
        });
        
        // Prevent taking photos of the screen with mobile devices
        document.addEventListener('visibilitychange', function() {
          if (document.hidden) {
            alert('Switching away from this page is not allowed');
            document.title = 'Please return to the document';
          } else {
            document.title = 'Secure PDF Viewer';
          }
        });
      })();
    </script>
  </body>
</html>